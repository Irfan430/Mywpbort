# ЁЯУж IrfanBot (Mywpbort-main) тАФ рж╕ржорзНржкрзВрж░рзНржг ржЧрж╛ржЗржб ржУ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг

ржПржЗ рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐рждрзЗ ржПржХржЯрж┐ **WhatsApp ржмржЯ** ржЖржЫрзЗ ржпрж╛ `@whiskeysockets/baileys` ржжрж┐рзЯрзЗ ржЪрж▓рзЗ, рж╕ржЩрзНржЧрзЗ ржЖржЫрзЗ Express ржнрж┐рждрзНрждрж┐ржХ **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб/рж╣рзЗрж▓рже ржПржирзНржбржкрзЯрзЗржирзНржЯ**, **рж╣ржЯ-рж░рж┐рж▓рзЛржб**, ржПржмржВ **MongoDB** (ржРржЪрзНржЫрж┐ржХ)ред ржХржорж╛ржирзНржб рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржлрзЛрж▓рзНржбрж╛рж░-ржнрж┐рждрзНрждрж┐ржХ (categories) + **рж░рж╛ржиржЯрж╛ржЗржорзЗ ржХрж╛рж╕рзНржЯржо ржХржорж╛ржирзНржб ржЗржирзНрж╕ржЯрж▓** ржХрж░рж╛рж░ рж╕рзБржмрж┐ржзрж╛ (`/cmd install`), GoatBot рж╕рзНржЯрж╛ржЗрж▓рзЗред

---

## тЬЕ ржХрзА ржХрзА ржЖржЫрзЗ (ржлрж┐ржЪрж╛рж░ рж╕ржорзВрж╣)

- **Pairing code login** (QR ржЫрж╛рзЬрж╛ржЗ ржХрзЛржбрзЗ рж▓ржЧржЗржи; рж░рж┐ржЯрзНрж░рж╛ржЗ/рж╕рзНржЯрзЗржмрж▓)
- **Dashboard/Health**: `/`, `/status`, `/health`, `/logs/tail`, `/dashboard/save`
- **MongoDB (optional)**: ржЗржЙржЬрж╛рж░/рж╕рзЗрж╢ржи ржмрзНржпрж╛ржХржЖржкрзЗрж░ ржЬржирзНржп
- **Command Loader**: `commands/{admin,core,group,tools,fun}` + **runtime custom commands**
- **Events**: ржирждрзБржи ржорзЗржорзНржмрж╛рж░/ржмржЯ-ржЬрзЯрзЗржи ржУрзЯрзЗрж▓ржХрж╛ржо ржорзЗрж╕рзЗржЬ
- **Protections**: Anti-link, Anti-call
- **Quality of life**: Auto read, Typing indicator, Uptime/Ping, Help
- **Hot reload**: рж▓рзЛржХрж╛рж▓ ржбрзЗржнрзЗ ржлрж╛ржЗрж▓ рж╕рзЗржн ржХрж░рж▓рзЗржЗ рж░рж┐рж▓рзЛржб (nodemon + chokidar)

---

## ЁЯЧВя╕П ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ (ржЙржЪрзНржЪ-рж╕рзНрждрж░рзЗрж░)

```
Mywpbort-main/
тФЬтФА index.js                   # ржорзЗржЗржи рж╕рж╛рж░рзНржнрж╛рж░/ржмржЯ рж╕рзНржЯрж╛рж░рзНржЯрж╛рж░
тФЬтФА package.json               # ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐/рж╕рзНржХрзНрж░рж┐ржкрзНржЯ
тФЬтФА config.json                # ржкрзНрж░рзЛржб ржХржиржлрж┐ржЧ (Render/рж╕рж╛рж░рзНржнрж╛рж░)
тФЬтФА config.dev.json            # ржбрзЗржн ржХржиржлрж┐ржЧ (рж▓рзЛржХрж╛рж▓)
тФЬтФА .env                       # ржкрзЛрж░рзНржЯ/ржЕрзНржпрж╛ржбржорж┐ржи ржХрзА ржЗрждрзНржпрж╛ржжрж┐
тФЬтФА database.js                # MongoDB ржХрж╛ржирзЗржХрзНржЯрж░ (optional)
тФЬтФА database/
тФВ  тФФтФА sessionModel.js         # рж╕рзЗрж╢ржи/ржбрзЗржЯрж╛ ржоржбрзЗрж▓ (ржпржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи)
тФЬтФА handlers/
тФВ  тФФтФА commandManager.js       # ржХржорж╛ржирзНржб рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рж┐, рж░рж╛ржиржЯрж╛ржЗржо ржЗржирзНрж╕ржЯрж▓
тФЬтФА commands/
тФВ  тФЬтФА admin/                  # ржЕрзНржпрж╛ржбржорж┐ржи ржХржорж╛ржирзНржб (kick, promote ржЗрждрзНржпрж╛ржжрж┐ + cmd)
тФВ  тФЬтФА core/                   # help, ping, uptime, system
тФВ  тФЬтФА group/                  # adduser, kick (ржЧрзНрж░рзБржк ржорзНржпрж╛ржирзЗржЬ)
тФВ  тФЬтФА tools/                  # sticker, toimg, quote, flux ржЗрждрзНржпрж╛ржжрж┐
тФВ  тФФтФА fun/                    # eightball ржЗрждрзНржпрж╛ржжрж┐
тФЬтФА events/
тФВ  тФЬтФА welcomeNewMember.js     # ржЧрзНрж░рзБржкрзЗ ржирждрзБржи ржЗржЙржЬрж╛рж░рзЗ ржУрзЯрзЗрж▓ржХрж╛ржо
тФВ  тФФтФА welcomeOnJoin.js        # ржмржЯ ржирж┐ржЬрзЗ ржЬрзЯрзЗржи ржХрж░рж▓рзЗ ржУрзЯрзЗрж▓ржХрж╛ржо
тФЬтФА utils/
тФВ  тФЬтФА database.js             # рж╣рзЗрж▓рзНржкрж╛рж░
тФВ  тФФтФА sessionStore.js         # рж╕рзЗрж╢ржи рж╕рзНржЯрзЛрж░
тФЬтФА public/
тФВ  тФФтФА index.html              # ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб рж╣рзЛржо (Express static)
тФФтФА render.yaml                # Render ржбрж┐ржкрзНрж▓рзЯ ржХржиржлрж┐ржЧ (ржРржЪрзНржЫрж┐ржХ)
```

---

## тЪЩя╕П ржкрзНрж░рзЯрзЛржЬржирзАрзЯрждрж╛

- **Node.js**: >= 18.x (package.json тЖТ `engines.node`)
- **npm** ржмрж╛ **pnpm/yarn** (ржЙрж▓рзНрж▓рзЗржЦрж┐ржд рж╕рзНржХрзНрж░рж┐ржкрзНржЯ npm ржзрж░рзЗ рж▓рзЗржЦрж╛)
- **MongoDB** (ржРржЪрзНржЫрж┐ржХ): ржЕржи/ржЕржл ржХрж░рждрзЗ `config.json` тЖТ `database.enabled`

---

## ЁЯФз ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи

### 1) `.env`
```
PORT=10000
NODE_ENV=development
ADMIN_KEY=your-secret-admin-key
# MONGO_URI=your-mongodb-uri (ржпржжрж┐ config.json ржП ржирж╛ ржжрзЗржи)
```

> ржирзЛржЯ: **рж╕рзЗржирзНрж╕рж┐ржЯрж┐ржн ржХрж┐ржЫрзБ `config.json`-ржП рж╣рж╛рж░рзНржбржХрзЛржб ржХрж░рж╛ ржЖржЫрзЗ (mongoURI)** тАФ ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ ржПржЧрзБрж▓рзЛ `.env`-ржП ржирж┐ржи ржПржмржВ `config.json` ржерзЗржХрзЗ рж░рж┐ржорзБржн/ржУржнрж╛рж░рж░рж╛ржЗржб ржХрж░рзБржиред

### 2) `config.dev.json` (рж▓рзЛржХрж╛рж▓ ржбрзЗржнрзЗрж░ ржЬржирзНржп)
- ржбрж┐ржлрж▓рзНржЯ prefix: `/`
- ржлрж┐ржЪрж╛рж░ ржлрзНрж▓рзНржпрж╛ржЧ: `features.{welcome,goodbye,antiCall,antiLink}`
- ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб: `dashboard.enabled`, `dashboard.adminKeyEnv`
- ржбрж╛ржЯрж╛ржмрзЗрж╕: `database.enabled`, `database.uri: "MONGO_URI_FROM_ENV"`

### 3) `config.json` (ржбрж┐ржкрзНрж▓рзЯрзЗрж░ ржЬржирзНржп)
- ржПржХржЗ ржХрзА-ржЧрзБрж▓рзЛ, рждржмрзЗ ржкрзНрж░рзЛржб ржнрзНржпрж╛рж▓рзБред **ржкрж░рж╛ржорж░рзНрж╢**: MongoDB URI `.env` ржерзЗржХрзЗ ржирж┐ржиред

---

## ЁЯЪА рж▓рзЛржХрж╛рж▓ рж░рж╛ржи (ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ)

```bash
# 1) ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐
npm install

# 2) ржХржиржлрж┐ржЧ ржХржкрж┐/ржПржбрж┐ржЯ
cp config.dev.json config.json      # ржмрж╛ ржирж┐ржЬрзЗрж░ ржорждрзЛ ржПржбрж┐ржЯ
cp .env .env.local || true          # .env ржарж┐ржХ рж░рж╛ржЦрзБржи

# 3) рж╕рзНржЯрж╛рж░рзНржЯ
npm run dev     # nodemon рж╕рж╣ рж╣ржЯ-рж░рж┐рж▓рзЛржб
# ржЕржержмрж╛
npm start       # node index.js
```

**ржкрзНрж░ржержо рж▓ржЧржЗржи (Pairing Code):**
- ржХржирж╕рзЛрж▓рзЗ pairing code ржжрзЗржЦрж╛ржмрзЗ (ржмрж╛ `/pair` ржХржорж╛ржирзНржб ржерж╛ржХрж▓рзЗ рж╕рзЗржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи) тАФ ржлрзЛржирзЗрж░ WhatsApp тЖТ Linked Devices тЖТ **Link with Phone Number** (ржмрж╛ ржХрзЛржб ржЕржирзБржпрж╛рзЯрзА) ржжрж┐рзЯрзЗ рж▓ржЧржЗржи ржХрж░рзБржиред
- рж▓ржЧржЗржи рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ рж╕рзЗрж╢ржи рж▓рзЛржХрж╛рж▓рж┐/ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж╕рзЗржн рж╣рждрзЗ ржкрж╛рж░рзЗ (ржХржиржлрж┐ржЧ ржЕржирзБржпрж╛рзЯрзА)ред

---

## тШБя╕П Render ржбрж┐ржкрзНрж▓рзЯ (ржЙржжрж╛рж╣рж░ржг)

- **Build Command**: `npm ci`
- **Start Command**: `node index.js`
- **Environment**:
  - `PORT`: 10000 (ржмрж╛ Render ржкрзНрж░ржжрждрзНржд)
  - `NODE_ENV`: `production`
  - `ADMIN_KEY`: `<your-admin-key>`
  - `MONGO_URI`: `<your-mongodb-uri>` (ржпржжрж┐ DB ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи)
- **Disk** (ржРржЪрзНржЫрж┐ржХ): рж╕рзЗрж╢ржи ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯ ржХрж░рждрзЗ ржПржХржЯрж┐ ржбрж┐рж╕рзНржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред
- `render.yaml` ржерж╛ржХрж▓рзЗ _Blueprint_ ржбрж┐ржкрзНрж▓рзЯ рж╕ржорзНржнржмред

ржбрж┐ржкрзНрж▓рзЯрзЗрж░ ржкрж░ **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб/рж╣рзЗрж▓рже**:
- `GET /` тЖТ `public/index.html`
- `GET /health` тЖТ `{ ok: true }`
- `GET /status` тЖТ ржмржЯ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕
- `GET /logs/tail?lines=200&key=ADMIN_KEY`
- `POST /dashboard/save` тЖТ ржХржиржлрж┐ржЧ рж╕рзЗржн (key ржжрж░ржХрж╛рж░)

---

## ЁЯзй ржХржорж╛ржирзНржб рж╕рж┐рж╕рзНржЯрзЗржо тАФ ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ

### ржХржорж╛ржирзНржб ржлрж╛ржЗрж▓рзЗрж░ ржмрзЗрж╕рж┐ржХ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░
```js
// commands/tools/echo.js
module.exports = {
  name: "echo",
  aliases: ["say"],
  usage: "/echo <text>",
  description: "Reply back with your text",
  run: async ({ sock, m, args, logger, CONFIG }) => {
    const text = args.join(" ").trim() || "Nothing to echo!";
    await m.reply(text);
  }
}
```

**рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи**: ржлрж╛ржЗрж▓ржЯрж┐ `commands/<category>/` ржлрзЛрж▓рзНржбрж╛рж░рзЗ рж░рж╛ржЦрж▓рзЗржЗ рж▓рзЛржб рж╣ржмрзЗ (рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ/рж╣ржЯ-рж░рж┐рж▓рзЛржбрзЗрж░ рж╕рж╛ржерзЗ)ред

### Runtime ржХрж╛рж╕рзНржЯржо ржХржорж╛ржирзНржб (рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯрзЗ ржЙржзрж╛ржУ)
`/cmd` ржХржорж╛ржирзНржбржЯрж┐ ржЖржЫрзЗ (ржжрзЗржЦрзБржи: `commands/admin/cmd.js`).

**ржЙржжрж╛рж╣рж░ржг:** ржЗржирж▓рж╛ржЗржи ржХрзЛржб ржЗржирзНрж╕ржЯрж▓
```
/cmd install hello.js module.exports={
  name:"hello", run: async({m})=>m.reply("Hi!")
}
```

**ржорж╛рж▓рзНржЯрж┐рж▓рж╛ржЗржи:**
```
/cmd install hello.js ```js
module.exports = {
  name: "hello",
  run: async ({m}) => m.reply("Hi from multiline!")
}
```

**рж░рж┐ржорзБржн/рж▓рж┐рж╕рзНржЯ:**
```
/cmd remove hello
/cmd list
```

### ржПржбржорж┐ржи/ржЧрзНрж░рзБржк ржХржорж╛ржирзНржб
- `commands/admin/*` тЖТ promote/demote/kick/mute ржЗрждрзНржпрж╛ржжрж┐
- `commands/group/*` тЖТ ржЧрзНрж░рзБржк ржЗржЙржЯрж┐рж▓рж┐ржЯрж┐ржЬ (adduser/kick ржЗрждрзНржпрж╛ржжрж┐)
- `commands/core/*` тЖТ help, ping, uptime, system
- `commands/tools/*` тЖТ sticker, toimg, quote, flux ржЗрждрзНржпрж╛ржжрж┐

> **Prefix**: ржбрж┐ржлрж▓рзНржЯ `/` тЖТ `config.json` тЖТ `prefix` ржжрж┐рзЯрзЗ ржмржжрж▓рж╛ржиред

---

## ЁЯОЫя╕П ржЗржнрзЗржирзНржЯрж╕

- `events/welcomeNewMember.js`: ржирждрзБржи ржорзЗржорзНржмрж╛рж░ ржПрж▓рзЗ `{users}`, `{group}` ржкрзНрж▓рзЗрж╕рж╣рзЛрж▓рзНржбрж╛рж░ рж╕рж╣ ржУрзЯрзЗрж▓ржХрж╛ржо ржорзЗрж╕рзЗржЬред
- `events/welcomeOnJoin.js`: ржмржЯ ржирж┐ржЬрзЗ ржЧрзНрж░рзБржкрзЗ ржпрзЛржЧ рж╣рж▓рзЗ ржЧрзНрж░рзБржк рж╕рж╛ржмржЬрзЗржХрзНржЯ/ржЕрзНржпрж╛ржбржорж┐ржи рж▓рж┐рж╕рзНржЯрж╕рж╣ ржорзЗрж╕рзЗржЬред

ржлрж┐ржЪрж╛рж░ ржЕржи/ржЕржл: `config.json тЖТ features.welcome / features.goodbye`

---

## ЁЯФР рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржирзЛржЯ

- **ржХржЦржиржЗ** ржкрзНрж░рзЛржбрж╛ржХрж╢ржи Mongo URI, Admin Key рж░рж┐ржкрзЛрждрзЗ ржХржорж┐ржЯ ржХрж░ржмрзЗржи ржирж╛ред `.env` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
- ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб рж╕рзЗржн/рж▓ржЧ ржЯрзЗржЗрж▓ ржПржирзНржбржкрзЯрзЗржирзНржЯрзЗ **`ADMIN_KEY` ржЖржмрж╢рзНржпржХ**ред
- Owner ржиржорзНржмрж░ (`config.json тЖТ owner`) рж╕ржарж┐ржХ E.164 ржлрж░ржорзНржпрж╛ржЯрзЗ рж░рж╛ржЦрзБржи (`+659xxxxxxx`)ред

---

## ЁЯЫая╕П ржЯрзНрж░рж╛ржмрж▓рж╢рзБржЯрж┐ржВ

- **Pairing code ржЖрж╕ржЫрзЗ ржирж╛**: рж╕рж╛рж░рзНржнрж╛рж░ ржЖржЙржЯржмрж╛ржЙржирзНржб ржмрзНрж▓ржХ? Render рж▓ржЧ ржЪрзЗржХ ржХрж░рзБржиред Node >=18 ржХрж┐ржирж╛ ржжрзЗржЦрзБржиред
- **MongoDB ржХрж╛ржирзЗржХрзНржЯ рж╣ржЪрзНржЫрзЗ ржирж╛**: `MONGO_URI` рж╕ржарж┐ржХ? IP allowlist/Network Access ржарж┐ржХ ржЖржЫрзЗ?
- **Commands рж▓рзЛржб рж╣ржЪрзНржЫрзЗ ржирж╛**: ржлрж╛ржЗрж▓ ржирж╛ржо/ржоржбрж┐ржЙрж▓ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ рж╕ржарж┐ржХ? ржХржирж╕рзЛрж▓ ржПрж░рж░рзЗ ржХрзА ржжрзЗржЦрж╛ржЪрзНржЫрзЗ?
- **AntiLink ржХрж╛ржЬ ржХрж░ржЫрзЗ ржирж╛**: `features.antiLink.enabled=true` ржПржмржВ `action=warn|delete` рж╕рзЗржЯ ржХрж░рзБржиред
- **Dashboard 401/403**: `?key=ADMIN_KEY` ржирж╛ ржжрж┐рж▓рзЗ ржмрзНрж▓ржХ рж╣ржмрзЗред

---

## ЁЯзк ржжрзНрж░рзБржд ржЯрзЗрж╕рзНржЯ ржкрзНрж▓рзНржпрж╛ржи

1. рж▓рзЛржХрж╛рж▓рж┐ `npm run dev` ржЪрж╛рж▓рж┐рзЯрзЗ pairing code ржжрж┐рзЯрзЗ рж▓ржЧржЗржи ржХрж░рзБржиред
2. `/ping`, `/uptime`, `/help` рж░рж╛ржи ржХрж░рзЗ ржжрзЗржЦрзБржиред
3. `/cmd install` ржжрж┐рзЯрзЗ ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ ржХржорж╛ржирзНржб ржЕрзНржпрж╛ржб ржХрж░рзБржи, ржХрж╛ржЬ ржХрж░ржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред
4. ржЧрзНрж░рзБржкрзЗ ржирждрзБржи ржорзЗржорзНржмрж╛рж░ ржЕрзНржпрж╛ржб ржХрж░рзЗ ржУрзЯрзЗрж▓ржХрж╛ржо ржЯрзНрж░рж┐ржЧрж╛рж░ ржжрзЗржЦрзБржиред
5. `/tools sticker`, `/tools toimg` ржЗрждрзНржпрж╛ржжрж┐ ржЯрзЗрж╕рзНржЯ ржХрж░рзБржи (ржорж┐ржбрж┐рзЯрж╛ ржкрж╛рж░ржорж┐рж╢ржи ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ ржирж╛)ред
6. Dashboard `/health`, `/status`, `/logs/tail?key=ADMIN_KEY` рж╣рж┐ржЯ ржХрж░рзЗ ржжрзЗржЦрзБржиред

---

## ЁЯУЭ рж▓рж╛ржЗрж╕рзЗржирзНрж╕

MIT (рж░рзЗржкрзЛрждрзЗ `LICENSE` ржлрж╛ржЗрж▓ ржЖржЫрзЗ)ред

---

## тД╣я╕П ржирзЛржЯ

- ржПржЗ README ржмрж╛ржВрж▓рж╛-ржлрж╛рж░рзНрж╕рзНржЯ, рждржмрзЗ ржЪрж╛ржЗрж▓рзЗ ржЗржВрж░рзЗржЬрж┐ ржнрзНржпрж╛рж░рж┐рзЯрзЗржирзНржЯржУ рждрзИрж░рж┐ ржХрж░рзЗ ржжрзЗржУрзЯрж╛ ржпрж╛ржмрзЗред
- ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ **prefix ржЫрж╛рзЬрж╛ ржЕржЯрзЛ-рж░рж┐ржкрзНрж▓рж╛ржЗ ржЧрзНрж░рж┐ржЯрж┐ржВ** ржмрж╛ **ржХрзЛржирзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ API рж░рзЗрж╕ржкржирзНрж╕рзЗ ржЕржЯрзЛ-рж░рж┐ржкрзНрж▓рж╛ржЗ** ржпрзБржХрзНржд ржХрж░рж╛рж░ ржиржорзБржирж╛ ржХржорж╛ржирзНржбржУ ржжрж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ тАФ ржмрж▓рж▓рзЗржЗ ржпрзБржХрзНржд ржХрж░рзЗ ржжрзЗржмрзЛред
